---
jupyter:
  jupytext:
    text_representation:
      extension: .Rmd
      format_name: rmarkdown
      format_version: '1.2'
      jupytext_version: 1.14.1
  kernelspec:
    display_name: Python 3 (ipykernel)
    language: python
    name: python3
---

```{python}
import numpy as np
import matplotlib.pyplot as plt
plt.rcParams['figure.figsize']=(12,8)
```

```{python}
import os
```

```{python}
import re

def get_data(dir, L):
    file_regex = f'am_b(\\d{{5}})_{L:03d}x{L:03d}.txt'
    data_sets = []
    for item in os.listdir(dir):
        path =dir+item 
        if not os.path.isfile(path):
            continue
        if not (m:=re.match(file_regex,item)):
            continue
        beta_s = m.group(1)
        beta = int(beta_s)/1000.0
        try: 
            content = np.loadtxt(path, dtype=np.float32)
            data_sets.append( (beta, content) )
        except:
            pass
    
    return sorted(data_sets, key=lambda x: x[0])

def specific_heat(data):
    return data[:,0].var()
```

```{python}
L = 64
V = L*L
```

```{python}
data_sets = get_data('../data/', L)

data = np.asarray(
    [ (b, b*b*d[:,0].var()/V, (2*d[:,1:3]**2).mean()/(V*V))
     for b,d in data_sets]
)
data
```

```{python}
plt.scatter(1/data[:,0], data[:,2]);
plt.grid();

```

```{python}
plt.scatter(1/data[:,0], data[:,1]);
plt.grid();

```

```{python}
eval("1+1")
```

```{python}
eval("list(np.arange(1,2,0.1))")
```

```{python}

```
